<style>
  .dj-container {
    max-width: 615px;
    font-family: "STMatilda Info Variable", system-ui, sans-serif;
  }
  .dj-basic-slider-container {
    position: relative;
    width: 100%;
  }
  .dj-image-wrapper {
    position: relative;
    width: 100%;
    overflow: hidden;
  }
  .dj-basic-slider-scroll {
    display: flex;
    gap: 10px;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    position: relative;
    width: 100%;
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .dj-basic-slider-scroll::-webkit-scrollbar {
    display: none;
  }
  .dj-basic-slider-item {
    flex-shrink: 0;
    scroll-snap-type: x mandatory;
    scroll-snap-align: center;
    max-width: 80%;
    height: 100%;
    position: relative;
  }
  .dj-basic-slider-item img {
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 5px;
  }
  .dj-basic-slider-item:last-child {
    padding-right: 30px;
  }
  .dj-caption {
    position: absolute;
    top: 5px;
    left: 5px;
    z-index: 20;
    background: rgba(0, 0, 0, 0.6);
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 20px;
    font-weight: 400;
  }
  .dj-gradient {
    position: absolute;
    width: 100%;
    height: 100%;
    background-image: linear-gradient(
      to right,
      #c1d9d9 0%,
      transparent 10%,
      transparent 83%,
      #c1d9d9 100%
    );
    z-index: 10;
    pointer-events: none;
    top: 0;
    left: 0;
  }
  .dj-slider-overview {
    position: absolute;
    bottom: 0;
    right: 0;
    height: 46%;
    z-index: 30;
    max-width: 100%;
  }
  .dj-nav-button {
    position: absolute;
    top: 40%;
    transform: translateY(-50%);
    background: rgba(0, 0, 0, 0.5);
    color: white;
    border: none;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    cursor: pointer;
    z-index: 20;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
  }
  .dj-nav-button svg {
    width: 24px;
    height: 24px;
    fill: currentColor;
  }
  @media (max-width: 600px) {
    .dj-nav-button {
      width: 40px;
      height: 40px;
    }
    .dj-nav-button svg {
      width: 20px;
      height: 20px;
    }
  }
  .dj-nav-button.dj-next svg {
    transform: scaleX(-1);
  }
  .dj-nav-button:disabled {
    opacity: 0.3;
    cursor: not-allowed;
  }
  .dj-nav-button.dj-prev {
    left: 10px;
  }
  .dj-nav-button.dj-next {
    right: 10px;
  }
  .dj-dots {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-top: 10px;
  }
  .dj-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: #efefef;
    cursor: pointer;
    transition: all 0.15s ease;
  }
  .dj-dot.dj-active {
    background: #454545;
    transform: scale(1.5);
  }
  .dj-container .dj-legend {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    margin-block: 8px;
    font-size: 16px;
  }
  .dj-container .dj-legend-item {
    display: flex;
    align-items: center;
    gap: 4px;
  }
  .dj-legend-color {
    width: 22px;
    height: 22px;
    border-radius: 4px;
    display: inline-block;
  }
  .dj-destroyed {
    background: #ff4500;
  }
  .dj-intact {
    background: #8a8a8a;
  }
  .dj-title h3 {
    font-size: 24px;
    margin-bottom: 0.3em;
  }
  .dj-annotation {
    font-size: 0.95em;
    color: #666;
    margin-top: 8px;
  }
</style>
<div class="dj-container">
  <div class="dj-title">
    <h3>Gaza Stadt in knapp zwei Monaten zerstört</h3>
  </div>
  <div class="dj-legend">
    <div class="dj-legend-item">
      <span class="dj-legend-color dj-destroyed"></span>
      <span>Wahrscheinlich zerstörte Gebäude</span>
    </div>
    <div class="dj-legend-item">
      <span class="dj-legend-color dj-intact"></span>
      <span>Wahrscheinlich intakte Gebäude</span>
    </div>
  </div>
  <div class="dj-basic-slider-container">
    <div class="dj-image-wrapper">
      <div class="dj-gradient"></div>
      <div class="dj-basic-slider-scroll">
        <div class="dj-basic-slider-item">
          <span class="dj-caption">12. Okt. 2023</span>
          <img
            src="https://b.staticfiles.at/elm/static/2025-dateien/output_20231012.webp?asdads"
            alt="12. Okt. 2023"
          />
        </div>
        <div class="dj-basic-slider-item">
          <span class="dj-caption">25. Okt. 2023</span>
          <img
            src="https://b.staticfiles.at/elm/static/2025-dateien/output_20231025.webp?asdads"
            alt="25. Okt. 2023"
          />
        </div>
        <div class="dj-basic-slider-item">
          <span class="dj-caption">05. Nov. 2023</span>
          <img
            src="https://b.staticfiles.at/elm/static/2025-dateien/output_20231105.webp?asdads"
            alt="05. Nov. 2023"
          />
        </div>
        <div class="dj-basic-slider-item">
          <span class="dj-caption">17. Nov. 2023</span>
          <img
            src="https://b.staticfiles.at/elm/static/2025-dateien/output_20231117.webp?asdads"
            alt="17. Nov. 2023"
          />
        </div>
        <div class="dj-basic-slider-item">
          <span class="dj-caption">22. Nov. 2023</span>
          <img
            src="https://b.staticfiles.at/elm/static/2025-dateien/output_20231122.webp?asdads"
            alt="22. Nov. 2023"
          />
        </div>
        <div class="dj-basic-slider-item">
          <span class="dj-caption">04. Dez. 2023</span>
          <img
            src="https://b.staticfiles.at/elm/static/2025-dateien/output_20231204.webp?asdads"
            alt="04. Dez. 2023"
          />
        </div>
        <div class="dj-basic-slider-item">
          <span class="dj-caption">16. Dez. 2023</span>
          <img
            src="https://b.staticfiles.at/elm/static/2025-dateien/output_20231216.webp?asdads"
            alt="16. Dez. 2023"
          />
        </div>
      </div>
      <img
        class="dj-slider-overview"
        src="https://b.staticfiles.at/elm/static/2025-dateien/itv_overview_map2.png?wwww"
        alt="Map Overlay"
      />
      <button class="dj-nav-button dj-prev">
        <svg viewBox="0 0 1200 1200" xmlns="http://www.w3.org/2000/svg">
          <path
            d="m825.84 1176c-29.668 0.035156-58.195-11.453-79.559-32.039l-432.84-417.6c-22.719-21.879-39.117-49.48-47.469-79.895-8.3555-30.414-8.3555-62.516 0-92.93 8.3516-30.414 24.75-58.016 47.469-79.895l432.84-417.6c29.453-28.402 71.82-38.934 111.14-27.629 39.324 11.305 69.629 42.734 79.5 82.441 9.8711 39.707-2.1914 81.664-31.645 110.07l-393 379.08 393 379.08c22.039 21.238 34.66 50.418 35.039 81.027 0.37891 30.605-11.516 60.09-33.027 81.867-21.508 21.773-50.844 34.031-81.453 34.027z"
          />
        </svg>
      </button>
      <button class="dj-nav-button dj-next">
        <svg viewBox="0 0 1200 1200" xmlns="http://www.w3.org/2000/svg">
          <path
            d="m825.84 1176c-29.668 0.035156-58.195-11.453-79.559-32.039l-432.84-417.6c-22.719-21.879-39.117-49.48-47.469-79.895-8.3555-30.414-8.3555-62.516 0-92.93 8.3516-30.414 24.75-58.016 47.469-79.895l432.84-417.6c29.453-28.402 71.82-38.934 111.14-27.629 39.324 11.305 69.629 42.734 79.5 82.441 9.8711 39.707-2.1914 81.664-31.645 110.07l-393 379.08 393 379.08c22.039 21.238 34.66 50.418 35.039 81.027 0.37891 30.605-11.516 60.09-33.027 81.867-21.508 21.773-50.844 34.031-81.453 34.027z"
          />
        </svg>
      </button>
    </div>
    <div class="dj-dots"></div>
  </div>
  <div class="dj-annotation">
    <b>Gebäudedaten:</b> The Humanitarian Data Exchange (HDX) -
    <b>Zerstörungsdaten:</b> Schadensanalyse von Copernicus Sentinel-1
    Satellitendaten durch Corey Scher und Jamon Van Den Hoek vom Conflict
    Ecology Lab der Oregon State Universität
  </div>
</div>
<script>
  (function () {
    const allSliders = document.querySelectorAll(
      ".dj-basic-slider-container:not([data-initialized])"
    );
    const container = allSliders[allSliders.length - 1];
    if (!container) return;
    container.setAttribute("data-initialized", "true");

    const slider = container.querySelector(".dj-basic-slider-scroll");
    const slides = container.querySelectorAll(".dj-basic-slider-item");
    const prevBtn = container.querySelector(".dj-prev");
    const nextBtn = container.querySelector(".dj-next");
    const dotsContainer = container.querySelector(".dj-dots");

    if (!slider || !slides || slides.length === 0) return;

    let current_image = 0;
    const total_images = slides.length;

    for (let i = 0; i < total_images; i++) {
      const dot = document.createElement("div");
      dot.className = "dj-dot" + (i === 0 ? " dj-active" : "");
      dot.onclick = () => goToSlide(i);
      dotsContainer.appendChild(dot);
    }

    function updateButtons() {
      prevBtn.disabled = current_image === 0;
      nextBtn.disabled = current_image >= total_images - 1;
    }

    function updateDots() {
      const dots = dotsContainer.querySelectorAll(".dj-dot");
      dots.forEach((dot, i) => {
        dot.className = "dj-dot" + (i === current_image ? " dj-active" : "");
      });
    }

    function updateCurrentImageOnScroll() {
      const containerRect = slider.getBoundingClientRect();
      let maxVisibleIndex = current_image;
      let maxVisibleArea = 0;

      slides.forEach((slide, index) => {
        const rect = slide.getBoundingClientRect();
        const visibleLeft = Math.max(rect.left, containerRect.left);
        const visibleRight = Math.min(rect.right, containerRect.right);
        const visibleWidth = Math.max(0, visibleRight - visibleLeft);

        if (visibleWidth > maxVisibleArea) {
          maxVisibleArea = visibleWidth;
          maxVisibleIndex = index;
        }
      });

      if (current_image !== maxVisibleIndex) {
        current_image = maxVisibleIndex;
        updateButtons();
        updateDots();
      }
    }

    function goToSlide(index) {
      const slideWidth = slides[0].clientWidth;
      const gap = parseInt(window.getComputedStyle(slider).gap) || 10;
      slider.scrollTo({ left: index * (slideWidth + gap), behavior: "smooth" });
      current_image = index;
      updateButtons();
      updateDots();
    }

    prevBtn.onclick = () => {
      if (current_image > 0) goToSlide(current_image - 1);
    };
    nextBtn.onclick = () => {
      if (current_image < total_images - 1) goToSlide(current_image + 1);
    };

    let scrollTimeout;
    slider.addEventListener("scroll", () => {
      clearTimeout(scrollTimeout);
      scrollTimeout = setTimeout(updateCurrentImageOnScroll, 150);
    });

    window.addEventListener("resize", () => {
      clearTimeout(scrollTimeout);
      scrollTimeout = setTimeout(updateCurrentImageOnScroll, 150);
    });

    updateButtons();
    updateDots();
  })();
</script>
